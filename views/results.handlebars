<!doctype html>
<html>
<head>
	<title>Results Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- LIBRARIES -->
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/bootstrap-flex.min.css" rel="stylesheet">
	<link href="/css/bootstrap-grid.min.css" rel="stylesheet">
	<link href="/css/bootstrap-reboot.min.css" rel="stylesheet">
	<!-- STYLESHEETS -->
	<link href="/css/main.css" rel="stylesheet">
	<link href="/css/results.css" rel="stylesheet">
    <!--FONTS-->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">
</head>

<body class="gradient-bg">
	<div class="container spacer">
	</div>
	<div class="container main-container">
		<!-- HEADER -->
		<div class="row header">
			<div class="col-sm-8">
				<h1>Results</h1>
			</div>
			<div class="col-sm-4">
				<a href="./"><button class="btn btn-secondary btn-block">Back to Start</button></a>
			</div>
		</div>
        <!-- SHOWS PREFERENCES -->
        <div class="row">
            <h3>Here are your group's top 3 preferences:</h3>
        </div>
        <div class="row">
            <div class="col-sm-4 text-xs-center">
                <p>[FOOD]</p>
            </div>
            <div class="col-sm-4 text-xs-center">
                <p>[FOOD]</p>
            </div>
            <div class="col-sm-4 text-xs-center">
                <p>[FOOD]</p>
            </div>
        </div>
        <!-- SHOWS RESULTS -->
        <div class="col-sm-6">
            <div class="row">
                <h4>Yelp Results:</h4>
            </div>
            <div class="row">
                <p>yelp result #1</p>
                <!-- INSERT YELP RESULT HERE -->
            </div>
            <div class="row">
                <p>yelp result #2</p>
                <!-- INSERT YELP RESULT HERE -->
            </div>
            <div class="row">
                <p>yelp result #3</p>
                <!-- INSERT YELP RESULT HERE -->
            </div>
            <div class="row">
                <p>yelp result #4</p>
                <!-- INSERT YELP RESULT HERE -->
            </div>
            <div class="row">
                <p>yelp result #5</p>
                <!-- INSERT YELP RESULT HERE -->
            </div>
        </div>
        <div class="col-sm-6">
            <div class="row">
                <h4>Google Maps:</h4>
            </div>
            <div id="map"></div>
            <script>
                // Note: This example requires that you consent to location sharing when
                // prompted by your browser. If you see the error "The Geolocation service
                // failed.", it means you probably did not give permission for the browser to
                // locate you.

                function initMap() {
                    var default_loc = {lat: 32.8800649, lng: -117.2362022};
                    var map = new google.maps.Map(document.getElementById('map'), {
                        center: default_loc,
                        zoom: 10
                    });
                    var infoWindow = new google.maps.InfoWindow({map: map});

                    console.log("Map initialized!");

                    // Try HTML5 geolocation.
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(function(position) {
                            var pos = {
                                lat: position.coords.latitude,
                                lng: position.coords.longitude
                            };

                            infoWindow.setPosition(pos);
                            infoWindow.setContent('Location found.');
                            map.setCenter(pos);
                        }, function() {
                            handleLocationError(true, infoWindow, map.getCenter());
                        });

                        console.log("Location found!");
                    }

                    else {
                        // Browser doesn't support Geolocation
                        handleLocationError(false, infoWindow, map.getCenter());
                    }



                    /* creating markers */
                    //32.8206185,-117.1726334 - Manna BBQ
                    var loc1 = {lat: 32.8206185, lng: -117.1726334};
                    var marker1 = new google.maps.Marker({
                        position: loc1,
                        map: map
                    });

                    //32.8205014,-117.1567012 - Grandma's Tofu
                    /*var loc2 = {lat: 32.8206185, lng: -117.1726334};
                    var marker2 = new google.maps.Marker({
                        position: loc2,
                        map: map
                    });*/

                    console.log("Markers initialized!");
                }

                function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                    infoWindow.setPosition(pos);
                    infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support geolocation.');

                    console.log("Geolocation failed!");
                }
                </script>
            </script>
            <div class="row spacer"></div>
        </div>
	</div>
	<div class="container spacer">
	</div>

    <!-- GOOGLE MAP API SCRIPT -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyABZaEhz5AnijS8IZ8mYWYq-tQJ1dMTNxk&callback=initMap" type="text/javascript"></script>

	<!-- SCRIPTS -->
	<script src="/js/jquery-3.1.1.min.js"></script>
	<script src="/js/tether.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/results.js"></script>
    </body>
</html>
